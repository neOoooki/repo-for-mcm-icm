# 台阶磨损仿真模型原理与实现参考

本文档整理了基于 Python 实现的台阶磨损仿真模型的技术细节，旨在为论文撰写提供核心原理、参数设定及实现逻辑的参考。

## 1. 模型概述 (Model Overview)

本模型旨在模拟高频人流作用下石质台阶表面的磨损演化过程。模型基于 **Archard 磨损定律**，通过构建**离散化网格**、**方向性足迹压力核**以及**多模态人流分布概率场**，利用**二维卷积 (2D Convolution)** 算法计算累积磨损深度。

核心特性包括：
- **方向性差异**：区分上行（前脚掌发力）与下行（脚跟冲击）的压力分布与位置偏差。
- **并行人流**：融合单人通行与双人并行（Parallel Walking）的概率分布。
- **物理驱动**：磨损深度直接关联材料硬度、正压力及滑动距离。

## 2. 物理基础：Archard 磨损定律 (Physics Basis)

磨损深度的计算遵循 Archard 公式：

$$ V = k \frac{P \cdot L}{H} $$

在离散化网格模型中，转化为单位面积上的磨损深度 $h$：

$$ h(x, y) = \frac{k}{H} \cdot p(x, y) \cdot \Delta L $$

其中参数设定如下（代码类 `StairWearMVP` 默认值）：
- **$k$ (磨损系数)**: $1 \times 10^{-4}$ (无量纲，代表磨损几率)。
- **$H$ (材料硬度)**: $200 \text{ MPa}$ (典型石材硬度)。
- **$P$ / $p(x,y)$ (正压力)**: 由行人体重 ($80 \text{ kg} \approx 784 \text{ N}$) 通过足迹核分布到网格点上。
- **$\Delta L$ (滑动距离)**: $5 \text{ mm}$ (假设每一步产生的微观相对滑动距离)。

## 3. 几何空间离散化 (Geometry & Discretization)

模型采用二维笛卡尔网格对台阶踏步表面进行离散化：

- **台阶尺寸**: 长 $1000 \text{ mm}$ $\times$ 宽(深) $400 \text{ mm}$。
- **网格分辨率**: $10 \text{ mm/pixel}$。
- **网格维度**: $100 \times 40$ 网格点。
- **坐标系定义**:
  - $X$ 轴：台阶长度方向 ($0 \sim 1000 \text{ mm}$)。
  - $Y$ 轴：台阶宽度/深度方向 ($0 \sim 400 \text{ mm}$)。
    - $Y=0$：靠墙内侧 (Wall)。
    - $Y=400$：台阶外缘 (Nosing)。

## 4. 足迹压力核设计 (Footprint Pressure Kernel)

足迹核是单个脚步对地面的压力分布矩阵，尺寸设定为 $300 \text{ mm} \times 100 \text{ mm}$。模型通过**双高斯峰值**叠加来模拟脚跟 (Heel) 和前脚掌 (Ball) 的压力中心。

为了反映上下楼梯的生物力学差异，模型定义了两种不同的足迹核：

### 4.1 上行模式 (Upward Direction)
- **主导压力**: 前脚掌 (Ball)。
- **压力系数**:
  - 前脚掌权重: 1.2
  - 脚跟权重: 0.8
  - **总冲击因子**: 1.8 (模拟蹬地时的额外动态载荷)。
- **位置偏移**: 向外缘偏移 $+50 \text{ mm}$ (上楼时脚部倾向于踩在踏步外侧以获得力臂)。

### 4.2 下行模式 (Downward Direction)
- **主导压力**: 脚跟 (Heel)。
- **压力系数**:
  - 前脚掌权重: 0.8
  - 脚跟权重: 1.5
  - **总冲击因子**: 3.0 (模拟下落着地时的较大冲击力)。
- **位置偏移**: 向内侧偏移 $-20 \text{ mm}$ (下楼时重心相对靠后，落点略微靠内)。

## 5. 人流分布概率场 (Traffic Distribution)

人流在台阶宽度方向（$Y$ 轴）的分布决定了磨损的横向形态。模型采用**高斯混合模型 (GMM)**：

1.  **单人通行 (Single Walking)**:
    - 单峰高斯分布，中心位于台阶中线。
    - 模拟大多数情况下的自然行走路径。

2.  **并行通行 (Parallel Walking)**:
    - 双峰高斯分布。
    - 模拟两人并排或交错通行的情况。
    - 峰值间距可调，模拟两人的肩宽间隔。

**总概率场**是两者的加权和：
$$ P_{total} = (1 - r) \cdot P_{single} + r \cdot P_{parallel} $$
*其中 $r$ 为并行比例，默认为 $0.2$ (20%)。*

## 6. 仿真计算流程 (Simulation Process)

仿真函数 `simulate_wear` 执行以下步骤：

1.  **流量分割**: 将总人流量 (Years $\times$ People/Year) 按 $50:50$ 分配给上行 ($N_{up}$) 和下行 ($N_{down}$)。
2.  **方向性累积**:
    - **上行磨损**:
        1. 生成基础概率场（混合单人/并行）。
        2. 应用上行位置偏移 ($+50 \text{ mm}$)。
        3. 与 **上行足迹核** 进行卷积运算。
        4. 累加到总磨损矩阵。
    - **下行磨损**:
        1. 生成基础概率场。
        2. 应用下行位置偏移 ($-20 \text{ mm}$)。
        3. 与 **下行足迹核** 进行卷积运算。
        4. 累加到总磨损矩阵。
3.  **边界处理**: 卷积采用 'same' 模式，保证输出网格尺寸不变。

## 7. 可视化输出 (Visualization)

模型生成一系列可视化图表以验证结果（输出至 `output/` 目录）：

1.  **2D 磨损深度热力图**:
    - 色阶: `inferno` (黑=无磨损, 亮黄=最大磨损)。
    - 视角: 底部为台阶外缘 (Nosing)，顶部为靠墙侧。
2.  **足迹核可视化**: 单独展示上行和下行的压力分布形态。
3.  **截面轮廓图**: 沿长度和宽度方向的中轴线磨损剖面。
4.  **3D 表面模型**:
    - 基于磨损深度生成的凹陷表面。
    - 视角调整为外缘朝向屏幕，直观展示踏步边缘的磨损状况。
    - Z轴夸张显示以突显微米/毫米级的磨损特征。

---
*代码参考: [main.py](main.py)*
